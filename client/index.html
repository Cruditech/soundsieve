<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Stripe Checkout Sample</title>

    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="css/normalize.css" />
    <link rel="stylesheet" href="css/global.css" />
    <script src="https://js.stripe.com/v3/"></script>
    <link
      href="https://releases.transloadit.com/uppy/v3.18.0/uppy.min.css"
      rel="stylesheet"
    />

<script src="https://replit.com/public/js/repl-auth-v2.js"></script>
  </head>r

  <body>
    <button id="browse">Select Files</button>
    <p id="result"></p>
    <script type="module">
      import {
        Uppy,
        Dashboard,
        ImageEditor,
        RemoteSources,
        Transloadit,
      } from 'https://releases.transloadit.com/uppy/v3.18.0/uppy.min.mjs'
      const uppy = new Uppy()
        .use(Transloadit, {
          waitForEncoding: true,
          alwaysRunAssembly: true,
          assemblyOptions: {
            params: {
              // To avoid tampering, use Signature Authentication:
              // https://transloadit.com/docs/topics/signature-authentication/
              auth: {
                key: 'TRANSLOADIT_KEY',
              },
              // It's often better store encoding instructions in your account
              // and use a `template_id` instead of adding these steps inline
              steps: {
                thumb: {
                  use: ':original',
                  robot: '/image/resize',
                  width: 75,
                  height: 75,
                  resize_strategy: 'fit',
                },
              },
            },
          },
        })
        .use(Dashboard, { trigger: '#browse' })
        .use(ImageEditor, { target: Dashboard })
        .use(RemoteSources, {
          companionUrl: 'https://api2.transloadit.com/companion',
        })
        .on('complete', ({ transloadit }) => {
          // Due to `waitForEncoding:true` this is fired after encoding is done.
          // Alternatively, set `waitForEncoding` to `false` and provide a `notify_url`
          console.log(transloadit) // Array of Assembly Statuses
          transloadit.forEach((assembly) => {
            console.log(assembly.results) // Array of all encoding results
          })
        })
        .on('error', (error) => {
          console.error(error)
        })
    </script>


    
    <div class="sr-root">
      <div class="sr-main">
      
        <section id="sievespace" class="container">
     
          <div id="box"></div>
        </section>
        <section class="container">
          <button onclick="LoginWithReplit()">Sign In with Replit</button>
          <button href="/auth/google">Sign In with Google</button>
        </section>
        <section class="container">


          <div>
            <h1>Single photo</h1>
            <h4>Purchase a Pasha original photo</h4>

            <div class="pasha-image">
              <img
                src="https://picsum.photos/280/320?random=4"
                width="140"
                height="160"
                />
            </div>
          </div>

          <form action="/create-checkout-session" method="POST">
            <button id="submit">Buy</button>
          </form>
        </section>

        <div id="error-message"></div>
      </div>
    </div>
  </body>
  <script src="js/index.js"></script>
</html>
